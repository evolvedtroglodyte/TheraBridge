[pytest]
# Test discovery patterns
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Additional options
addopts =
    # Verbose output
    -v
    # Short traceback format
    --tb=short
    # Disable most warnings for cleaner output
    --disable-warnings

    # Coverage settings
    --cov=app
    --cov-branch
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=xml
    --cov-report=json

    # Coverage thresholds (fail if below these percentages)
    --cov-fail-under=80

    # Show summary of slowest tests
    --durations=10

    # Strict markers (fail on unknown markers)
    --strict-markers

    # Show local variables in tracebacks
    -l

# Test markers for categorization
markers =
    # Authentication tests
    auth: Authentication and authorization tests
    # Role-based access control tests
    rbac: Role-based access control tests
    # Integration tests (may be slower)
    integration: Integration tests that test multiple components
    # Unit tests (fast, isolated)
    unit: Fast unit tests for individual functions/methods
    # Slow tests (mark tests that take >1s)
    slow: Tests that take significant time to run
    # Database tests
    db: Tests that require database access
    # API tests
    api: Tests for API endpoints
    # Goal tracking tests (Feature 6)
    goal_tracking: Tests for treatment goal tracking and progress monitoring
    # Analytics and dashboard tests
    analytics: Tests for analytics calculations and dashboard endpoints

# Asyncio configuration for pytest-asyncio
asyncio_mode = auto

# Minimum Python version
minversion = 7.0

# Output settings
console_output_style = progress
