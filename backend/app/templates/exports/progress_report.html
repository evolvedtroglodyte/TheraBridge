{% extends "base.html" %}

{% block title %}Progress Report - {{ patient.full_name }}{% endblock %}

{% block header %}
<h1>Progress Report</h1>
<p><strong>Patient:</strong> {{ patient.full_name }}</p>
<p><strong>Period:</strong> {{ start_date.strftime('%B %d, %Y') }} - {{ end_date.strftime('%B %d, %Y') }}</p>
<p><strong>Prepared by:</strong> {{ therapist.full_name }}</p>
{% endblock %}

{% block content %}
{% if include_sections.patient_info %}
<div class="section">
    <div class="section-title">Patient Information</div>
    <p><strong>Name:</strong> {{ patient.full_name }}</p>
    <p><strong>Date of Birth:</strong> {{ patient.dob.strftime('%B %d, %Y') if patient.dob else 'N/A' }}</p>
    <p><strong>Email:</strong> {{ patient.email }}</p>
</div>
{% endif %}

{% if include_sections.treatment_goals %}
<div class="section">
    <div class="section-title">Treatment Goals & Progress</div>
    <table>
        <thead>
            <tr>
                <th>Goal</th>
                <th>Baseline</th>
                <th>Current</th>
                <th>Progress</th>
            </tr>
        </thead>
        <tbody>
            {% for goal in goals %}
            <tr>
                <td>{{ goal.description }}</td>
                <td>{{ goal.baseline }}</td>
                <td>{{ goal.current }}</td>
                <td>{{ goal.progress_percentage }}%</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% if include_sections.session_summary %}
<div class="section">
    <div class="section-title">Session Summary</div>
    <p><strong>Total Sessions:</strong> {{ session_count }}</p>
    <p><strong>Average Duration:</strong> {{ avg_duration_minutes }} minutes</p>
    <p><strong>Key Topics Discussed:</strong></p>
    <ul>
        {% for topic in key_topics %}
        <li>{{ topic }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}
{% endblock %}
