# Audio Test Samples Cleanup Report

**Date:** December 17, 2025
**Location:** `/audio-transcription-pipeline/tests/samples/`
**Current Total Size:** 81 MB
**Total Files:** 4 audio files

---

## Current File Inventory

| File Name | Size | Format | Duration (approx) | Status |
|-----------|------|--------|-------------------|--------|
| LIVE Cognitive Behavioral Therapy Session (1).mp3 | 21 MB | MP3, 64kbps, 44.1kHz, Stereo | ~35 min | ✅ REFERENCED |
| Person-Centred Therapy Session - Full Example [VLDDUL3HBIg].mp3 | 23 MB | MP3, 64kbps, 44.1kHz, Stereo | ~39 min | ⚠️ UNREFERENCED |
| Person-Centred Therapy Session - Full Example [VLDDUL3HBIg]_processed.mp3 | 23 MB | MP3, 64kbps, 16kHz, Mono | ~39 min | ❌ DUPLICATE/PROCESSED |
| compressed-cbt-session.m4a | 15 MB | M4A (ALAC/AAC-LC) | ~25 min | ⚠️ UNREFERENCED |
| **onemintestvid.mp3** (MISSING) | N/A | N/A | ~1 min | ❌ REFERENCED BUT NOT FOUND |

---

## Analysis & Findings

### What Tests Need

After reviewing test files (`test_full_pipeline.py`, `test_diarization.py`, `test_performance_logging.py`, README.md):

- **Primary test file** (`test_full_pipeline.py`) expects: `samples/onemintestvid.mp3`
- **Current state:** This file is MISSING - tests will fail when run
- **Fallback behavior:** Tests can accept command-line arguments to use alternative files
- **Documentation reference:** README.md also references `onemintestvid.mp3` in quick start examples

### Issues Identified

1. **Critical:** `onemintestvid.mp3` is missing but referenced in multiple places
2. **Redundant:** `_processed.mp3` file appears to be an intermediate output from preprocessing (shouldn't be stored)
3. **Unused samples:** Two full therapy session files (23MB each) are not referenced by any tests
4. **Quality mismatch:**
   - Large files (21-23MB) are inefficient for unit tests
   - Tests should use small (~1 minute) samples for fast iteration
   - Full files are better for integration/performance testing

---

## Cleanup Recommendation

### KEEP (Essential)

**Option A: Minimal Test Suite** - Recommended for this project

1. **Create a small test sample** (< 2 MB, ~1 minute)
   - Can be generated by extracting first minute from existing files
   - Or download a short, royalty-free therapy dialogue recording
   - File: `onemintestvid.mp3` (1 min, ~2MB)

2. **Keep ONE full therapy session** for integration tests (optional)
   - Keep: `LIVE Cognitive Behavioral Therapy Session (1).mp3` (21 MB)
   - Why: Good for full pipeline testing and performance benchmarks
   - Can be used by passing file path to tests as argument

### DELETE (Redundant/Processed)

| File | Reason | Space Saved |
|------|--------|-------------|
| Person-Centred Therapy Session - Full Example [VLDDUL3HBIg]_processed.mp3 | Duplicate output file from preprocessing | 23 MB |
| Person-Centred Therapy Session - Full Example [VLDDUL3HBIg].mp3 | Unreferenced, redundant with CBT session | 23 MB |
| compressed-cbt-session.m4a | Unreferenced, duplicate test data | 15 MB |

---

## Space Savings Analysis

### Current State
- Total: 81 MB
- Breakdown:
  - Referenced: 21 MB (LIVE CBT Session)
  - Unreferenced: 60 MB (3 files - processed, alternative, compressed)

### After Cleanup

#### Scenario 1: Minimal (Tests Only)
```
Keep:  onemintestvid.mp3 (1-2 MB, new small file)
Delete: 81 MB current
Result: 1-2 MB (98-99% reduction)
Savings: 79-80 MB
```

#### Scenario 2: Balanced (Tests + Integration)
```
Keep:  onemintestvid.mp3 (1-2 MB)
Keep:  LIVE Cognitive Behavioral Therapy Session (1).mp3 (21 MB)
Delete: 58 MB (Person-Centred files + compressed)
Result: 22-23 MB
Savings: 58-59 MB
```

---

## Recommended Action Plan

### Step 1: Create Minimum Test Sample
**Option A (Easiest):** Extract from existing file
```bash
from pydub import AudioSegment
audio = AudioSegment.from_file("LIVE Cognitive Behavioral Therapy Session (1).mp3")
test_clip = audio[:60000]  # First 60 seconds
test_clip.export("onemintestvid.mp3", format="mp3", bitrate="64k")
```

**Option B:** Download royalty-free sample (~1 min therapy-style dialogue)

### Step 2: Delete Redundant Files (After Approval)
```bash
# In audio-transcription-pipeline/tests/samples/
rm "Person-Centred Therapy Session - Full Example [VLDDUL3HBIg]_processed.mp3"
rm "Person-Centred Therapy Session - Full Example [VLDDUL3HBIg].mp3"
rm "compressed-cbt-session.m4a"
```

### Step 3: Verify Tests Still Pass
```bash
cd audio-transcription-pipeline
python tests/test_full_pipeline.py  # Should work with onemintestvid.mp3
```

### Step 4: Update Documentation
- README.md already references correct file - no changes needed
- Confirm `onemintestvid.mp3` is in version control

---

## Final Recommendation: Scenario 2 (Balanced)

**Best approach for a functioning test suite:**

- Keep the small test file (1-2 MB) for unit tests
- Keep ONE full session (21 MB) for performance/integration testing
- Delete all redundant files (58 MB)
- Result: Maintains test coverage while saving 70%+ space

**Space Savings:** 58-59 MB recovered

---

## Summary

| Item | Count | Size | Action |
|------|-------|------|--------|
| Files to Keep | 2 | ~23 MB | Retain for testing |
| Files to Delete | 3 | ~58 MB | Remove redundant files |
| Files to Create | 1 | ~2 MB | Generate small test sample |
| **Total Savings** | - | **~56-57 MB** | 70% reduction |

**Status:** AWAITING USER APPROVAL - No files deleted yet. All recommendations above are non-destructive analysis only.
